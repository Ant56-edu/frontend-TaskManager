<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TaskManager - Gestión de usuarios</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>
    <style>
      .bg-custom-blue {
        background-color: #0d6efd;
      }
      .bg-custom-blue-light {
        background-color: #337ff1;
      }
      .bg-custom-gray {
        background-color: #a2b6d4;
      }
      .bg-custom-gray-dark {
        background-color: #6e7a8d;
      }
      .container {
        max-width: 800px;
        margin: 20px auto;
      }
      .margen-opciones-header-op1 {
        margin-left: 800px;
        margin-top: 8px;
      }
      .margen-opciones-header-op2 {
        margin-left: 20px;
        margin-top: 8px;
      }
    </style>
  </head>
  <body class="bg-light">
    <header class="navbar bg-custom-blue py-3 mb-4 justify-content-center">
      <div class="container-fluid justify-content-start">
        <span class="navbar-brand mb-0 display-1 p-1 h1 fw-bold text-dark"
          >TaskManager</span
        >
        <span class="margen-opciones-header-op1 fw-bold text-light"
          >Gestión de usuarios</span
        >
        <span class="margen-opciones-header-op2 fw-bold text-light"
          >Gestión de tareas</span
        >
      </div>
    </header>

    <div class="d-flex justify-content-between ms-1">
      <div
        class="container bg-custom-blue-light rounded-5 p-4"
        id="listaUsuarios"
        style="width: 48%"
      >
        <h4 class="mb-4">Crear tarea</h4>

        <form>
          <!-- Texto -->
          <div class="mb-1">
            <label for="nombre" class="form-label">Nombre de la tarea</label>
            <input class="form-control" type="text" name="nombre" id="nombre" />
          </div>

          <!-- Búsqueda -->
          <div class="mb-1">
            <div class="col-md-6">
              <label for="gestorEncargado" class="form-label">Gestor</label>
              <select
                id="gestorEncargado"
                class="form-control"
                data-live-search="true"
              >
                <option value="1">Opción 1</option>
              </select>
            </div>
          </div>

          <!-- Select + búsqueda -->
          <div class="row g-3 mb-1">
            <div class="col-md-6">
              <label for="empleadosAsignados" class="form-label"
                >Empleados asignables</label
              >
              <select
                id="empleadosAsignados"
                class="form-control"
                data-live-search="true"
              >
                <option value="1">Opción 1</option>
              </select>
            </div>
          </div>

          <!-- Radio -->
          <div class="mb-1">
            <label class="form-label">Boom</label><br />
            <input
              class="form-check-input"
              type="radio"
              name="estado"
              id="estado"
            />
            <label for="estado" class="form-check-label">Activo</label>
          </div>

          <!-- Botones -->
          <div class="d-flex gap-2 mt-4">
            <button type="submit" class="btn btn-light btn-outline-success">
              Crear tarea
            </button>
            <button type="reset" class="btn btn-light btn-outline-danger">
              Limpiar campos
            </button>
          </div>
        </form>
      </div>

      <div
        class="container bg-custom-blue-light rounded rounded-5"
        id="listaUsuarios"
        style="width: 48%"
      >
        <br />
        <button
          class="w-100 bg-custom-gray rounded-pill d-flex justify-content-between align-items-center"
        >
          <span>Something</span>
          <span class="bg-custom-gray-dark rounded-pill px-3 py-1">Rol </span>
        </button>
        <div class="mb-1"></div>
        <button
          class="w-100 bg-custom-gray rounded-pill d-flex justify-content-between align-items-center"
        >
          <span>Something</span>
          <span class="bg-custom-gray-dark rounded-pill px-3 py-1">Rol </span>
        </button>
        <br />
      </div>
    </div>
    <footer></footer>
    <script>
      async function obtenerDatosProtegidos() {
        const token = sessionStorage.getItem("token");

        const response = await fetch("/api/datos", {
          headers: {
            Authorization: "Bearer " + token,
          },
        });

        const data = await response.json();
        console.log(data);
      }

      async function listarTareas() {
        const response = await fetch("../java/controladores/Servlet", {
          method: "POST",
          endpoint: "/usuarios/listado",
          headers: { "Content-Type": "application/json" },
          body: "",
        });

        const data = await response.json();

        const tareaLista = [];
        const rolDestacado = document.createElement("span");
        const espaciadoLista = document.createElement("div");

        tareaLista.textContent = data.filter((d) => d.age > 37);
        rolDestacado.class = "bg-custom-gray-dark rounded-pill px-3 py-1";
        espaciadoLista.class = "mb-1";

        if (data.value.rol != "Empleado") {
          rolDestacado.textContent = data.value.rol;
          tareaLista.appendChild(rolDestacado);
          tareaLista.append(espaciadoLista);
        }

        document.getElementById("listaUsuarios").appendChild(tareaLista);
      }

      async function resumenTarea() {
        const resumenEspacio = document.createElement("div");
        resumenEspacio.class =
          "container bg-custom-blue-light rounded rounded-5";
        resumenEspacio.id = "resumenUsuario";

        resumenEspacio.appendChild();
        document.getElementById("listaUsuarios").append(resumenEspacio);
      }
    </script>
  </body>
</html>
